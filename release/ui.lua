local a,b,c,d=(function(e)local f={[{}]=true}local g;local h={}local require;local i={}g=function(j,k)if not h[j]then h[j]=k end end;require=function(j)local l=i[j]if l then if l==f then return nil end else if not h[j]then if not e then local m=type(j)=='string'and'\"'..j..'\"'or tostring(j)error('Tried to require '..m..', but no such module has been registered')else return e(j)end end;i[j]=f;l=h[j](require,i,g,h)i[j]=l end;return l end;return require,i,g,h end)(require)c("__root",function(require,n,c,d)local o={Core=require("ccui.core"),Components=require("ccui.components"),Util=require("ccui.util"),new=require("ccui.core").new}return o end)c("ccui.core",function(require,n,c,d)local p=require("ccui.components.Component")local q=require("ccui.components.Frame")local r=require("ccui.util")local s={}s.__index=s;local t=term;function s.new(term)local self=setmetatable({},s)self.term=term or t.current()self.root=q.new({term=self.term})self.running=false;self.events={}local u=self.events["alarm"]return self end;function s:clearScreen()self.term.clear()self.term.setCursorPos(1,1)self.term.setTextColor(colors.white)self.term.setBackgroundColor(colors.black)end;function s:renderUI()self:clearScreen()self.root:render(self.term)end;function s:addEventListener(v,w)if not self.events[v]then self.events[v]={}end;table.insert(self.events[v],w)return self,w end;function s:removeEventListener(v,w)if not self.events[v]then return self end;for x,y in ipairs(self.events[v])do if y==w then table.remove(self.events[v],x)break end end;return self end;function s:start()self.root:mount(self)self:renderUI()self.running=true;while self.running do self:renderUI()local v,z,A,B=os.pullEvent()if self.events[v]then for C,w in ipairs(self.events[v])do w(z,A,B)end end end;self:clearScreen()return self end;function s:stop()self.running=false;return self end;return s end)c("ccui.util",function(require,n,c,d)local r={}local D=0;function r.generateUniqueId()D=D+1;return D end;function r.pointInRect(E,F,G)return E>=G.x and E<=G.x+G.width-1 and F>=G.y and F<=G.y+G.height-1 end;return r end)c("ccui.components.Frame",function(require,n,c,d)local p=require("ccui.components.Component")local q={}setmetatable(q,p)q.__index=q;function q.new(H)local self=p.new(H)setmetatable(self,q)local I,J=term.getSize()self.props.type="frame"self.props.x=H.x or 1;self.props.y=H.y or 1;self.props.width=H.width or I;self.props.height=H.height or J;return self end;function q:render(term)local E=self:getProps("x")local F=self:getProps("y")local K=self:getProps("bgColor")local L=self:getProps("fgColor")local M=self:getProps("width")local N=self:getProps("height")term.setCursorPos(E,F)if K then term.setBackgroundColor(K)end;if L then term.setTextColor(L)end;for x=1,N do term.write(string.rep(" ",M))end;term.setCursorPos(E,F)p.render(self,term)end;return q end)c("ccui.components.Component",function(require,n,c,d)local r=require("ccui.util")local p={}p.__index=p;function p.new(H)local self=setmetatable({},p)self.props={}self.props.type="component"self.props.x=1;self.props.y=1;self.props.width=1;self.props.height=1;for O,y in pairs(H)do self.props[O]=y end;if H.id==nil then self.props.id=tostring(r.generateUniqueId())end;self.parent=nil;self.children={}self.eventListeners={}return self end;function p:findById(D)if self:getProps("id")==D then return self end;for C,P in ipairs(self.children)do local Q=P:findById(D)if Q then return Q end end end;function p:getProps(j,R)local S=self.props[j]if type(S)=="function"then return S(self)elseif S==nil then return R else return S end end;function p:setProps(j,S)self.props[j]=S;return self end;function p:add(P)P.parent=self;table.insert(self.children,P)if self.core then P:mount(self.core)end;return self end;function p:mount(T)self.core=T;if self.eventListeners then for v,U in pairs(self.eventListeners)do for C,V in ipairs(U)do T:addEventListener(v,V)end end end;for C,P in ipairs(self.children)do P:mount(T)end end;function p:unmount()if self.core and self.eventListeners then for v,U in pairs(self.eventListeners)do for C,V in ipairs(U)do self.core:removeEventListener(v,V)end end end;for C,P in ipairs(self.children)do P:unmount()end;self.core=nil end;function p:on(v,w)if not self.eventListeners[v]then self.eventListeners[v]={}end;local V=function(...)w(self,...)end;table.insert(self.eventListeners[v],V)return self,V end;function p:off(v,w)if not self.eventListeners[v]then return self end;for x,y in ipairs(self.eventListeners[v])do if y==w then table.remove(self.eventListeners[v],x)break end end;return self end;function p:setState(W,S)if not self.state then self.state={}end;self.state[W]=S end;function p:getState(W)return self.state and self.state[W]end;function p:hitTest(E,F)return r.pointInRect(E,F,{x=self:getProps("x"),y=self:getProps("y"),width=self:getProps("width"),height=self:getProps("height")})end;function p:onClick(w)self:on("mouse_click",function(C,X,E,F)if X==1 and self:hitTest(E,F)then w(self)end end)return self end;function p:render(term)local E=self:getProps("x")local F=self:getProps("y")local K=self:getProps("bgColor")local L=self:getProps("fgColor")if E and F then term.setCursorPos(E,F)end;for C,P in ipairs(self.children)do if K then term.setBackgroundColor(K)end;if L then term.setTextColor(L)end;P:render(term)end end;return p end)c("ccui.components",function(require,n,c,d)local o={Component=require("ccui.components.Component"),Frame=require("ccui.components.Frame"),Label=require("ccui.components.Label"),Button=require("ccui.components.Button"),Checkbox=require("ccui.components.Checkbox")}return o end)c("ccui.components.Checkbox",function(require,n,c,d)local p=require("ccui.components.Component")local Y={}setmetatable(Y,p)Y.__index=Y;function Y.new(H)local self=p.new(H)setmetatable(self,Y)self.props.type="checkbox"self.props.checked=H.checked or false;self.props.height=1;self.props.width=3;self:onClick(function()self:toggle()end)return self end;function Y:toggle(S)if S==nil then if type(self.props.checked)=="function"then return end;self:setProps("checked",not self:getProps("checked"))else self:setProps("checked",S)end;return self end;function Y:isChecked()return self:getProps("checked")end;function Y:render(term)local E=self:getProps("x")local F=self:getProps("y")local K=self:getProps("bgColor",colors.black)local L=self:getProps("fgColor",colors.white)local Z=self:getProps("checked")term.setCursorPos(E,F)term.blit(Z and"[x]"or"[ ]",string.rep(colors.toBlit(L),3),string.rep(colors.toBlit(K),3))p.render(self,term)end;return Y end)c("ccui.components.Button",function(require,n,c,d)local p=require("ccui.components.Component")local _={}setmetatable(_,p)_.__index=_;function _.new(H)local self=p.new(H)setmetatable(self,_)self.props.type="button"self.props.text=H.text or""self.props.width=H.width or function(self)return#self:getProps("text")+2 end;self.props.height=H.height or 1;return self end;function _:render(term)local a0=self:getProps("bgColor",colors.white)local a1=self:getProps("fgColor",colors.black)local E=self:getProps("x")local F=self:getProps("y")local M=self:getProps("width")local N=self:getProps("height")local a2=self:getProps("text")local a3=F+math.floor((N-1)/2)term.setBackgroundColor(a0)term.setTextColor(a1)term.setCursorPos(E,F)for x=1,N do term.setCursorPos(E,F+x-1)term.write(string.rep(" ",M))end;term.setCursorPos(E+1,a3)term.write(a2)term.setBackgroundColor(colors.black)term.setTextColor(colors.white)p.render(self,term)end;return _ end)c("ccui.components.Label",function(require,n,c,d)local p=require("ccui.components.Component")local a4={}setmetatable(a4,p)a4.__index=a4;function a4.new(H)local self=p.new(H)setmetatable(self,a4)self.props.type="label"self.props.text=H.text or""self.props.width=H.width or function(self)return#self:getProps("text")end;return self end;function a4:setText(a2)self.props.text=a2;return self end;function a4:render(term)local E=self:getProps("x")local F=self:getProps("y")local a1=self:getProps("fgColor",colors.white)local a0=self:getProps("bgColor",colors.black)local a2=self:getProps("text")term.setCursorPos(E,F)term.blit(a2,string.rep(colors.toBlit(a1),#a2),string.rep(colors.toBlit(a0),#a2))p.render(self,term)end;return a4 end)return a("__root")
